(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1053:function(e,t,a){},1054:function(e,t,a){},1055:function(e,t,a){},1064:function(e,t,a){},1065:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(17),l=a(50),u=Object(l.b)(),s=a(21),m=a(1069),f=a(49),d=a(447),p=a.n(d),b=a(9),v=a.n(b);function h(){return v()().format("YYYY-MM-DD HH:mm:ss")}function g(e){return v()(e).format("YYYY-MM-DD")}var E=a(448),y=a.n(E);function O(){var e=Object(n.useState)(h()),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){!function e(){requestAnimationFrame(e),c(h())}()}),[]),r.a.createElement("div",{className:y.a.clock},a)}var j=a(228),x=a(14),w=a(477),D=m.a.Header,N=m.a.Content;function S(e){var t=e.children,a=Object(n.useState)(u.location.pathname),c=Object(s.a)(a,2),i=c[0],o=c[1];function l(e){return i===e?"active-menu":""}return Object(n.useEffect)((function(){u.listen((function(){o(u.location.pathname)}))}),[]),r.a.createElement(f.d,null,r.a.createElement(m.a,{className:p.a.layout},r.a.createElement(D,{className:"layout-header"},r.a.createElement("div",null,r.a.createElement(O,null)),r.a.createElement("div",{className:"layout-header-title"},r.a.createElement("div",null,"\u65b0\u51a0\u75ab\u60c5\u6a21\u62df\u9884\u6d4b\u4e0e\u591a\u5c3a\u5ea6\u8206\u60c5\u76d1\u6d4b\u5206\u6790\u7cfb\u7edf"),r.a.createElement(f.c,{color:["#45b8d1","#45b8d1"],className:"title-decorate"})),r.a.createElement("div",{className:"layout-header-menu"},r.a.createElement("span",null,r.a.createElement(f.b,null,r.a.createElement("span",{className:"menu-item ".concat(l("/analysis"))},r.a.createElement(j.a,{to:"/analysis"},"\u75ab\u60c5\u5206\u6790")))),r.a.createElement("span",null,r.a.createElement(f.b,null,r.a.createElement("span",{className:"menu-item ".concat(l("/option"))},r.a.createElement(j.a,{to:"/option"},"\u8206\u60c5\u4fe1\u606f")))),r.a.createElement("span",null,r.a.createElement(f.b,null,r.a.createElement("span",{className:"menu-item ".concat(l("/network"))},r.a.createElement(j.a,{to:"/network"},"\u8206\u60c5\u5206\u5e03")))))),r.a.createElement(N,{className:"layout-content"},r.a.createElement(x.a,{locale:w.a},t))))}var Y=a(22),C=a(451),k=a.n(C);function R(e){var t=e.children,a=e.title,n=e.extra;return r.a.createElement(f.a,{className:"border-padding-1 "},r.a.createElement("div",{className:k.a.section},r.a.createElement("header",{className:"section-header"},r.a.createElement("div",{className:"section-header-container"},r.a.createElement("div",{className:"header-title"},a),r.a.createElement("div",null,n))),r.a.createElement("div",{className:"section-container"},t)))}var M=a(164),A=a(1074),_=a(214),F=a.n(_),z=F.a.create({timeout:3e4,baseURL:window.globalConfig.localBaseUrl});z.interceptors.response.use((function(e){return e.data}));var L=z,T=F.a.create({timeout:3e4,baseURL:window.globalConfig.baseUrl});T.interceptors.response.use((function(e){return e.data}));var B=L,I=[{title:"\u6392\u540d",dataIndex:"Rank",width:"60px"},{title:"\u5185\u5bb9",dataIndex:"Content"},{title:"\u641c\u7d22\u6b21\u6570",dataIndex:"SearchNum",width:"100px"}];function G(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),l=o[0],u=o[1],m=Object(n.useState)(v()().format("YYYY-MM-DD")),f=Object(s.a)(m,2),d=f[0],p=f[1];Object(n.useEffect)((function(){L("weiboHotTop10.json").then((function(e){var t=e.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{SearchNum:Number(e.SearchNum)})})).reduce((function(e,t){var a=t.Date;return e[a]||(e[a]=[]),e[a].push(t),e}),{}),a=Object.keys(t).sort((function(e,t){return v()(e)-v()(t)}));c(t),u(a),p(v()("2020/1/21").format("YYYY-MM-DD"))}))}),[]);var b=l.map((function(e){return{label:e,value:e}}));return r.a.createElement(R,{title:"\u70ed\u70b9\u8bdd\u9898",extra:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(M.a,{value:d,options:b,dropdownStyle:{height:"200px"},onChange:function(e){p(e)}}))},r.a.createElement(A.a,{className:"topic-table",rowKey:"Rank",columns:I,dataSource:a[d]||[],scroll:{y:"con"},pagination:!1}))}var P=a(6),H=a.n(P),W=a(31),U=a.n(W),V={backgroundColor:"transparent",tooltip:{trigger:"axis"},xAxis:[{type:"time",splitLine:{show:!1}}],yAxis:[{splitLine:{show:!1},name:"\u65b0\u589e\u75c5\u4f8b",axisLabel:{formatter:function(e){return e>=1e4?(e/1e4).toFixed(1)+"\u4e07":e>=1e3?(e/1e3).toFixed(1)+"\u5343":void 0}}},{splitLine:{show:!1},name:"\u8206\u60c5\u6570\u91cf",offset:-10,axisLabel:{formatter:function(e){return e>=1e4?(e/1e4).toFixed(1)+"\u4e07":e>=1e3?(e/1e3).toFixed(1)+"\u5343":void 0}}}],grid:[{top:30,bottom:20,left:40},{top:30,bottom:20}],series:[{name:"\u65b0\u589e\u75c5\u4f8b",id:"new",type:"line",showSymbol:!1,tooltip:{}},{name:"\u8206\u60c5\u6570\u91cf",id:"opinion",type:"bar",showSymbol:!1,xAxisIndex:0,yAxisIndex:1,tooltip:{formatter:"\u8206\u60c5\u6570\u91cf: {b}"}}]};function K(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t.current=H.a.init(e.current,"dark"),t.current.setOption(V),L("CountryDailyCount.json").then((function(e){t.current.setOption({series:{id:"new",data:e.map((function(e){return[g(e.updateTime),e.confirmedCount]}))}})})),L("CountTopicNum.json").then((function(e){var a=U.a.chain(e).map((function(e){var t=v()(e.Date,"MM\u6708DD");return Object(Y.a)(Object(Y.a)({},e),{},{updateTime:t.format("YYYY-MM-DD"),timeStamp:t.valueOf()})})).orderBy("timeStamp").map((function(e){return[e.updateTime,e["\u603b\u8ba1"]]})).value();t.current.setOption({series:{id:"opinion",data:a}})}))}),[]),r.a.createElement(R,{title:"\u6bcf\u65e5\u65b0\u589e\u4e0e\u8206\u60c5\u6570\u91cf"},r.a.createElement("div",{className:"chart-container",ref:e}))}var J=a(166),q=a(37),Z=[30,30],Q=Z[0]/2;function $(e,t){return e.map((function(e,a){var n=t.convertToPixel({seriesId:"label"},e.date);return{name:e.date,id:a+"pie",type:"pie",center:n,label:{normal:{formatter:"{c}",position:"inside",fontSize:8}},radius:Q,data:Object(J.a)(U.a.map(e.data,(function(e,t){return{name:t,value:e}}))),tooltip:{show:!0}}}))}var X={backgroundColor:"transparent",title:{show:!1},tooltip:{},calendar:{top:25,left:"30",right:"5%",orient:"vertical",cellSize:Z,range:"2020/01",itemStyle:{borderColor:"#fff",borderWidth:1,color:"transparent"},splitLine:{show:!1},yearLabel:{show:!1},dayLabel:{nameMap:"cn",color:"#aaa",position:"end"},monthLabel:{nameMap:"cn",color:"#aaa"}},series:[{id:"label",type:"scatter",coordinateSystem:"calendar",symbolSize:1,label:{normal:{show:!1,formatter:function(e){return H.a.format.formatTime("dd",e.value[0])},offset:[-Z[0]/2+10,-Z[1]/2+10],textStyle:{color:"#000",fontSize:14}}},z:0}]};function ee(){var e=Object(n.useRef)(),t=Object(n.useRef)(null);return Object(n.useEffect)((function(){e.current=H.a.init(t.current,"dark"),e.current.setOption(X),B("\u8c23\u8a00.json").then((function(t){var a=U.a.chain(t).reduce((function(e,t){var a=t.data;return e[a]||(e[a]={timeStamp:v()(a).valueOf(),date:a,data:[]}),e[a].data.push(t.category),e}),{}).values().orderBy("timeStamp").map((function(e){return{timeStamp:e.timeStamp,date:g(e.date),data:U.a.countBy(e.data)}})).value(),n=U.a.chain(t).map("category").uniq().value(),r=Object(q.c)(a,(function(e){return e.timeStamp})).map((function(e){return v()(e).format("YYYY-MM-DD")})),c=a.map((function(e){return[e.date,1]}));e.current.setOption({calendar:{range:r}}),e.current.setOption({legend:{data:n},series:[{id:"label",data:c}].concat(Object(J.a)($(a,e.current)))})}))}),[]),r.a.createElement("div",{ref:t,className:"chart-container"})}var te=[{title:"\u65e5\u671f",dataIndex:"data"},{title:"\u8c23\u8a00\u5185\u5bb9",dataIndex:"title"},{title:"\u8f9f\u8c23",dataIndex:"author"}];function ae(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){return B("\u8c23\u8a00.json").then((function(e){c(e)})),function(){}}),[]),r.a.createElement(R,{title:"\u8c23\u8a00\u5206\u6790"},r.a.createElement(A.a,{rowKey:"data",columns:te,dataSource:a,scroll:{y:!0},pagination:!1}))}var ne=a(466),re=a.n(ne),ce=a(213),ie=q.h(q.i);function oe(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useRef)({}),i=Object(n.useRef)({}),o=Object(n.useRef)([]),l=Object(n.useRef)([]),u=Object(n.useRef)({}),m=Object(n.useState)(["positive"]),f=Object(s.a)(m,2),d=f[0],p=f[1],b=Object(n.useState)(v()("2020/2/25").format("YYYY-MM-DD")),h=Object(s.a)(b,2),g=h[0],E=h[1];Object(n.useEffect)((function(){function n(){a.current.selectAll("g.arcBar").remove(),["positive","neural","negative"].forEach((function(e){!function(e){var t=c.current.barRadius,n=o.current,r=q.c(n,(function(t){return+t[e]})),i=q.g().domain(r).range(t),l=q.f().padAngle((function(){return.01})).value((function(){return 1}))(n),u=q.a().outerRadius((function(t){return i(+t.data[e])})).innerRadius((function(){return t[0]})).cornerRadius((function(){return 2}));a.current.append("g").classed("arcBar",!0).classed("bar-".concat(e),!0).attr("display",(function(){return d.includes(e)?null:"none"})).selectAll("g.arcG").data(l).enter().append("g").classed("arcG",!0).append("path").attr("d",u).attr("fill",(function(){return ie(e)})).attr("opacity",.5).transition().duration(400).ease(q.b).attrTween("d",(function(t){var a=q.d(Object(Y.a)(Object(Y.a)({},t),{},{endAngle:t.startAngle,data:Object(Y.a)(Object(Y.a)({},t.data),{},Object(ce.a)({},e,0))}),t);return function(e){return u(a(e))}}))}(e)}))}function r(e){var t=v()("2020/".concat(e,"/1")),n=v()(t).add(1,"month"),r=U.a.chain(l.current).filter((function(e){return v()(e).unix()>=t.unix()&&v()(e).unix()<n.unix()})).value(),i=q.f().padAngle((function(){return.01})).value((function(){return 1}))(r),o=c.current.dateRadius,u=q.a().outerRadius((function(){return o[1]})).innerRadius((function(){return o[0]})).cornerRadius((function(){return 5}));a.current.selectAll("g.pieDate").remove(),a.current.append("g").classed("pieDate",!0).selectAll("g.arcDate").data(i).enter().append("g").classed("arcDate",!0).on("click",(function(e){var t=e.data,a=v()(t).format("YYYY-MM-DD");E(a)})).attr("cursor","pointer").append("path").attr("d",u).attr("fill","#202f5e")}u.current.updateBar=n,function(){var u=[],s=(v()("2020-4-1").valueOf()-v()("2020-1-9").valueOf())/864e5;l.current=[];for(var m=function(e){var t=v()("2020-1-9").add(e,"day").format("YYYY-MM-DD");l.current.push(t),u.push(B("emotion/".concat(t,".json")).then((function(e){i.current[t]=e.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{date:"".concat(e.datetime," ").concat(e.time)})}))})))},f=0;f<s;f++)m(f);Promise.all(u).then((function(){B("EmotionNum.json").then((function(u){U.a.chain(u).map("date").orderBy((function(e){return v()(e).valueOf()})).value();!function(){var u=e.current,s=u.clientWidth,m=u.clientHeight,f=q.e([s,m]),d=f/2,p=[d-.7*d,d],b=[d/8,p[0]],h=[0,b[0]];c.current={width:f,barRadius:p,dateRadius:b,monthRadius:h},q.j(t.current).select("g").remove(),a.current=q.j(t.current).attr("width",f).attr("height",f).attr("viewBox","0 0 ".concat(f," ").concat(f)).append("g").attr("transform","translate(".concat(f/2,", ").concat(f/2,")")),E=g,console.log(E),o.current=U.a.chain(i.current[E]||[]).map((function(e){return{date:v()(e.date,"YYYY-MM-DD HH:mm").startOf("hour").valueOf(),emotion:e.emotion}})).reduce((function(e,t){var a=t.date;return e[a]||(e[a]=[]),e[a].push(t),e}),{}).forEach((function(e,t,a){a[t]=Object(Y.a)(Object(Y.a)({},U.a.countBy(e,"emotion")),{},{date:t})})).values().orderBy("date").value(),console.log(o.current);var E;var y=v()(g).month()+1;(function(){var e=U.a.chain(l.current).map((function(e){return v()(e).month()+1})).uniq().value(),t=q.f().padAngle((function(){return.02})).value((function(){return 1}))(e),n=c.current.monthRadius,i=q.a().outerRadius((function(){return n[1]})).innerRadius((function(){return n[0]})).cornerRadius((function(){return 5}));a.current.append("g").classed("monthG",!0).selectAll("g.arcG").data(t).enter().append("g").classed("arcDate",!0).on("click",(function(e){r(e.data)})).attr("cursor","pointer").append("path").attr("d",i).attr("fill","#ffaa00")})(),r(y),n()}()}))}))}()}),[d,g]);return r.a.createElement(R,{title:"\u60c5\u611f\u5206\u6790"},r.a.createElement("div",{className:"chart-container barChart",ref:e,style:{textAlign:"center"}},r.a.createElement("svg",{ref:t}),r.a.createElement("div",{className:"chart-legend"},[{type:"positive",name:"\u79ef\u6781"},{type:"neural",name:"\u4e2d\u7acb"},{type:"negative",name:"\u6d88\u6781"}].map((function(e){return r.a.createElement("div",{key:e.type,className:"legend-item ".concat(d.includes(e.type)?"":"inactive"),onClick:function(){return function(e){var t=[];t=d.includes(e)?d.filter((function(t){return t!==e})):[].concat(Object(J.a)(d),[e]),p(t)}(e.type)}},r.a.createElement("span",{className:"legend",style:{backgroundColor:ie(e.type)}}),r.a.createElement("span",{className:"legend-label"},e.name))}))),r.a.createElement("div",{className:"chart-title"},g)))}function le(){return r.a.createElement("div",{className:re.a.opinion},r.a.createElement("div",{className:"opinion-left"},r.a.createElement("div",{className:"opinionChart"},r.a.createElement(K,null)),r.a.createElement("div",{className:"hotTopic"},r.a.createElement(G,null))),r.a.createElement("div",{className:"opinion-center"},r.a.createElement("div",{className:"main-chart"},r.a.createElement(oe,null)),r.a.createElement("div",{className:"analys-table"},r.a.createElement(ae,null))),r.a.createElement("div",{className:"opinion-right"},r.a.createElement("div",{className:"calendar"},r.a.createElement(R,{title:"\u6bcf\u65e5\u8c23\u8a00\u70ed\u70b9\u5206\u5e03"},r.a.createElement(ee,null)))))}var ue=a(1070),se=a(1071),me=(a(127),a(222)),fe=a.n(me),de=a(1075),pe=(a(1005),a(1006),a(1007),a(1008),a(1009),a(1010),a(1011),a(1012),a(1013),a(1014),a(1015),a(1016),a(1017),a(1018),a(1019),a(1020),a(1021),a(1022),a(1023),a(1024),a(1025),a(1026),a(1027),a(1028),a(1029),a(1030),a(1031),a(1032),a(1033),a(1034),a(1035),a(1036),a(1037),a(1038),a(1076)),be={title:[{show:!0,text:"",textStyle:{color:"#fff",fontSize:18},left:20,top:20}],tooltip:{show:!0,formatter:function(e){if(e.data)return e.name+"\uff1a"+e.data.value}},visualMap:{type:"piecewise",showLabel:!0,seriesIndex:0,pieces:[{gt:100},{gt:50,lte:100},{gt:31,lte:50},{gt:20,lte:30},{gt:10,lte:20},{gte:1,lte:10},{lte:0}],inRange:{color:["#6FCF6A","#FFFD64","#FF5000"]},textStyle:{color:"#7B93A7"},align:"left",bottom:5,left:"20"},geo:{zoom:.5,map:"china",left:"left",right:"10",label:{emphasis:{show:!1}},itemStyle:{emphasis:{areaColor:"#fff464"}}},series:{name:"mapSer",type:"map",roam:!1,geoIndex:0,label:{show:!1},data:[]}},ve={confirmed:"city_confirmedCount",suspected:"city_suspectedCount",cured:"city_curedCount",dead:"city_deadCount"};function he(e){var t=e.visible,a=e.setVisible,c=e.provice,i=e.currentDate,o=e.type,l=Object(n.useRef)(null),u=Object(n.useRef)(null),s=Object(n.useRef)({});return Object(n.useEffect)((function(){B("CityDataDaily.json").then((function(e){s.current=U.a.chain(e).reduce((function(e,t){var a=t.provinceName;return e[a]||(e[a]=[]),e[a].push(t),e}),{}).value(),console.log(s.current)}))}),[]),Object(n.useEffect)((function(){t&&setTimeout((function(){var e=U.a.chain(s.current).find((function(e,t){return t.includes(c)})).filter((function(e){return e.updateTime===i})).reduce((function(e,t){var a=t.cityName;return e[a]||(e[a]=[]),e[a].push(t),e}),{}).map((function(e,t){return{name:t,value:U.a.sumBy(e,(function(e){return+e[ve[o]]}))}})).value();be.title[0].text=c,be.geo.map=c,be.series.data=e,u.current=H.a.init(l.current),u.current.setOption(be)}))}),[t,c,i,o]),r.a.createElement(pe.a,{className:fe.a["province-modal"],footer:!1,visible:t,onCancel:function(){return a(!1)},width:"50vw",bodyStyle:{height:"60vh"}},r.a.createElement("div",{className:"chart-container",ref:l}))}function ge(){var e=Object(n.useState)("province"),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)("2020-01-30"),o=Object(s.a)(i,2),l=o[0],u=o[1];var m=Object(n.useState)("confirmed"),d=Object(s.a)(m,2),p=d[0],b=d[1],h=function(e){b(e)},g=Object(n.useState)("china"),E=Object(s.a)(g,2),y=E[0],O=E[1],j=Object(n.useState)(!1),x=Object(s.a)(j,2),w=x[0],D=x[1],N=Object(n.useRef)(null),S=Object(n.useRef)(null);return Object(n.useEffect)((function(){B("ProvinceDataDaily.json").then((function(e){var t=[];e.map((function(e){if(e.updateTime===l){var a={};"confirmed"===p&&(a.name=e.provinceName,a.value=Number(e.province_confirmedCount)),"suspected"===p&&(a.name=e.provinceName,a.value=Number(e.province_suspectedCount)),"cured"===p&&(a.name=e.provinceName,a.value=Number(e.province_curedCount)),"dead"===p&&(a.name=e.provinceName,a.value=Number(e.province_deadCount)),t.push(a)}}));var n={};if(t.length){t=t.sort((u="value",function(e,t){return t[u]-e[u]}));for(var r=[],i=[],o=0;o<5;o++)i.push(t[o]),r.push(o+t[o].name);var u;return n={title:[{show:!0,text:"\u6392\u540d\u60c5\u51b5",textStyle:{color:"#fff",fontSize:18},right:180,top:30}],tooltip:{show:!0,formatter:function(e){if(e.data)return e.name+"\uff1a"+e.data.value}},visualMap:{type:"piecewise",showLabel:!0,seriesIndex:0,pieces:[{gt:100},{gt:50,lte:100},{gt:31,lte:50},{gt:20,lte:30},{gt:10,lte:20},{gte:1,lte:10},{lte:0}],inRange:{color:["#6FCF6A","#FFFD64","#FF5000"]},textStyle:{color:"#7B93A7",fontSize:8},align:"right",bottom:5,left:"47%",textGap:5},grid:{right:10,top:70,bottom:100,width:"20%"},xAxis:{show:!1},yAxis:{type:"category",inverse:!0,nameGap:16,axisLine:{show:!1,lineStyle:{color:"#ddd"}},axisTick:{show:!1,lineStyle:{color:"#ddd"}},axisLabel:{interval:0,margin:85,textStyle:{color:"#455A74",align:"left",fontSize:14},rich:{a:{color:"#fff",backgroundColor:"#FAAA39",width:20,height:20,align:"center",borderRadius:2},b:{color:"#fff",backgroundColor:"#4197FD",width:20,height:20,align:"center",borderRadius:2}},formatter:function(e){return parseInt(e.slice(0,1))<3?["{a|"+(parseInt(e.slice(0,1))+1)+"}  "+e.slice(1)].join("\n"):["{b|"+(parseInt(e.slice(0,1))+1)+"}  "+e.slice(1)].join("\n")}},data:r},geo:{zoom:.8,map:"china",left:"left",right:"300",label:{emphasis:{show:!1}},itemStyle:{emphasis:{areaColor:"#fff464"}}},series:[{name:"mapSer",type:"map",roam:!1,geoIndex:0,label:{show:!1},data:t},{name:"barSer",type:"bar",roam:!1,visualMap:!1,zlevel:2,barMaxWidth:8,barGap:0,itemStyle:{normal:{color:function(e){var t=[{colorStops:[{offset:0,color:"#FFD119"},{offset:1,color:"#FFAC4C"}]},{colorStops:[{offset:0,color:"#00C0FA"},{offset:1,color:"#2F95FA"}]}];return e.dataIndex<3?t[0]:t[1]},barBorderRadius:15}},data:i}]},S.current=H.a.init(N.current),S.current.setOption(n),S.current.on("click",(function(e){"province"===a&&(O(e.name),c("city"),D(!0))})),function(){}}}),[p,l])})),r.a.createElement(R,{title:"\u75ab\u60c5\u5730\u56fe",extra:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(de.a,{defaultValue:v()(l,"YYYY-MM-DD"),format:"YYYY-MM-DD",disabledDate:function(e){return e<v()(new Date("2020/01/24"))||e>v()(new Date("2020/05/24"))},onChange:function(e,t){u(t)}}))},r.a.createElement("div",{className:fe.a.map},r.a.createElement("div",{className:"switch-btn"},r.a.createElement("span",{onClick:function(){return h("confirmed")}},r.a.createElement(f.b,{className:"confirmed"===p?"activeBtn btn":"btn"},"\u65b0\u589e\u786e\u8bca")),r.a.createElement("span",{onClick:function(){return h("suspected")}},r.a.createElement(f.b,{className:"suspected"===p?"activeBtn btn":"btn"},"\u65b0\u589e\u7591\u4f3c")),r.a.createElement("span",{onClick:function(){return h("cured")}},r.a.createElement(f.b,{className:"cured"===p?"activeBtn btn":"btn"},"\u65b0\u589e\u6cbb\u6108")),r.a.createElement("span",{onClick:function(){return h("dead")}},r.a.createElement(f.b,{className:"dead"===p?"activeBtn btn":"btn"},"\u65b0\u589e\u6b7b\u4ea1")),r.a.createElement("span",{onClick:function(){return O("china"),void c("province")}},r.a.createElement(f.b,{className:"btn"},"\u5168\u56fd"))),r.a.createElement("div",{className:"chart-container",ref:N})),r.a.createElement(he,{visible:w,setVisible:D,provice:y,currentDate:l,type:p}))}var Ee=a(297),ye=a.n(Ee),Oe=(a(1053),Object(n.createContext)(null));function je(){var e=Object(n.useContext)(Oe),t=e.curProvince,a=e.curType,c=e.curDate,i=Object(n.useRef)(null),o=Object(n.useRef)(null);return Object(n.useEffect)((function(){var n="".concat(t,"\u8fc1\u5165"===a?"-\u8fc1\u5165\u6765\u6e90\u5730.json":"-\u8fc1\u51fa\u76ee\u7684\u5730.json");B(n).then((function(e){var a=Array.from(new Set(e.map((function(e){var a={};return a.source=t,a.target=e.migratename,a.value=Number(e[c]),a}))));a=a.filter((function(e){return!!e.value&&e.target!==t}));var n=Array.from(new Set(a.map((function(e){var t={};return t.name=e.target,t}))));n.push({name:t});var r={title:{show:!1,text:"\u8fc1\u79fb\u56fe",textStyle:{color:"#fff"}},series:{type:"sankey",layout:"none",focusNodeAdjacency:"allEdges",data:n,links:a,label:{fontSize:14,color:"#fff"}},tooltip:{trigger:"item"}};return o.current=H.a.init(i.current),o.current.setOption(r),function(){}}),[e])})),r.a.createElement("div",{className:"chart-container",ref:i})}a(1054);function xe(){var e=Object(n.useContext)(Oe),t=e.curProvince,a=e.curType,c=Object(n.useRef)(null),i=Object(n.useRef)(null);return Object(n.useEffect)((function(){B("\u8fc1\u5165"===a?"\u7701\u4efd-\u8fc1\u5165\u89c4\u6a21\u6307\u6570.json":"\u7701\u4efd-\u8fc1\u51fa\u89c4\u6a21\u6307\u6570.json").then((function(e){var n=e.find((function(e){return e.migratename===t})),r=[],o=[];for(var l in n)"migratename"!==l&&"citycode"!==l&&(r.push(l),o.push(n[l]));var u={title:{text:"".concat(t).concat(a,"\u8d8b\u52bf"),textStyle:{color:"#fff"}},xAxis:{type:"category",boundaryGap:!1,data:r,axisLine:{show:!1},axisLabel:{color:"#fff"},axisTick:{show:!1}},yAxis:{type:"value",show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},series:[{data:o,type:"line",areaStyle:{}}]};return i.current=H.a.init(c.current),i.current.setOption(u),function(){}}))}),[e]),r.a.createElement("div",{className:"chart-container",ref:c})}var we=["\u5317\u4eac\u5e02","\u5929\u6d25\u5e02","\u6cb3\u5317\u7701","\u5c71\u897f\u7701","\u5185\u8499\u53e4\u81ea\u6cbb\u533a","\u8fbd\u5b81\u7701","\u5409\u6797\u7701","\u9ed1\u9f99\u6c5f\u7701","\u4e0a\u6d77\u5e02","\u6c5f\u82cf\u7701","\u6d59\u6c5f\u7701","\u5b89\u5fbd\u7701","\u798f\u5efa\u7701","\u6c5f\u897f\u7701","\u5c71\u4e1c\u7701","\u6cb3\u5357\u7701","\u6e56\u5357\u7701","\u5e7f\u4e1c\u7701","\u5e7f\u897f\u81ea\u6cbb\u533a","\u6d77\u5357\u7701","\u91cd\u5e86\u5e02","\u56db\u5ddd\u7701","\u8d35\u5dde\u7701","\u4e91\u5357\u7701","\u897f\u85cf\u81ea\u6cbb\u533a","\u9655\u897f\u7701","\u7518\u8083\u7701","\u9752\u6d77\u7701","\u5b81\u590f\u81ea\u6cbb\u533a","\u65b0\u7586\u81ea\u6cbb\u533a","\u53f0\u6e7e\u7701","\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a","\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a"];function De(){var e=Object(n.useState)("\u5317\u4eac\u5e02"),t=Object(s.a)(e,2),a=t[0],c=t[1],i=we.map((function(e){return{label:e,value:e}}));var o=Object(n.useState)("\u8fc1\u5165"),l=Object(s.a)(o,2),u=l[0],m=l[1];var f=Object(n.useState)("20200228"),d=Object(s.a)(f,2),p=d[0],b=d[1];var h={curProvince:a,curType:u,curDate:p};return r.a.createElement(R,{title:"\u8fc1\u79fb\u5206\u6790",extra:r.a.createElement("div",{className:ye.a["switch-btn"]},r.a.createElement(M.a,{className:"select",value:a,options:i,dropdownStyle:{height:"200px"},onChange:function(e){c(e)}}),r.a.createElement(M.a,{className:"select",value:u,options:[{lable:"\u8fc1\u5165",value:"\u8fc1\u5165"},{lable:"\u8fc1\u51fa",value:"\u8fc1\u51fa"}],onChange:function(e){m(e)}}),r.a.createElement(de.a,{defaultValue:v()(p,"YYYYMMDD"),format:"YYYYMMDD",disabledDate:function(e){return e<v()(new Date("2020/01/01"))||e>v()(new Date("2020/03/15"))},onChange:function(e,t){b(t)}}))},r.a.createElement("div",{className:ye.a.migrate},r.a.createElement("div",{className:"sankey"},r.a.createElement(Oe.Provider,{value:h},r.a.createElement(je,null))),r.a.createElement("div",{className:"linearea"},r.a.createElement(Oe.Provider,{value:h},r.a.createElement(xe,null)))))}a(1055);function Ne(){var e=Object(n.useState)("2020-02-01"),t=Object(s.a)(e,2),a=t[0],c=t[1];var i=[],o=[],l=[],u=[],m=[],f=Object(n.useRef)(null),d=Object(n.useRef)(null);return Object(n.useEffect)((function(){B("ComfiredCompare.json").then((function(e){i=e.filter((function(e){return e.updateTime===a}))}),[a]).then(B("Migrate.json").then((function(e){o=e.filter((function(e){return e.updateTime===a}))}),[a])),setTimeout((function(){i.length&&o.length&&i.forEach((function(e){var t=o.find((function(t){return t.provinceName===e.provinceName}));t&&(l.push(e.provinceName),u.push(Number(e.ComfiredRatio)),m.push(Number(t.Ratio)))}));var e={title:{show:!1,text:"\u8fc1\u5165\u89c4\u6a21\u4e0e\u786e\u8bca\u5bf9\u6bd4\u56fe",textStyle:{color:"#fff"}},tooltip:{trigger:"axis"},legend:{data:["\u8fc1\u5165\u6bd4\u4f8b","\u786e\u8bca\u6bd4\u4f8b"],textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:l,axisLabel:{color:"#fff"},axisLine:{lineStyle:{color:"#fff"}},axisTick:{inside:!0}},yAxis:{type:"value",axisLabel:{show:!1},axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1},splitLine:{show:!1}},series:[{name:"\u8fc1\u5165\u6bd4\u4f8b",type:"line",stack:"\u6bd4\u7387",data:m},{name:"\u786e\u8bca\u6bd4\u4f8b",type:"line",stack:"\u6bd4\u7387",data:u}]};return d.current=H.a.init(f.current),d.current.setOption(e),function(){}}),1e3)})),r.a.createElement(R,{title:"\u8fc1\u5165\u89c4\u6a21\u4e0e\u786e\u8bca\u5bf9\u6bd4\u56fe",extra:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(de.a,{defaultValue:v()(a,"YYYY-MM-DD"),format:"YYYY-MM-DD",disabledDate:function(e){return e<v()(new Date("2020/01/23"))||e>v()(new Date("2020/04/30"))},onChange:function(e,t){c(t)}}))},r.a.createElement("div",{className:"chart-container",ref:f}))}var Se=a(472),Ye=a.n(Se);function Ce(){return r.a.createElement(ue.a,{gutter:16,className:Ye.a.analysis},r.a.createElement(se.a,{span:12,className:"analysis-left"},r.a.createElement("div",{className:"chart-map"},r.a.createElement(ge,null)),r.a.createElement("div",{className:"chart-line"},r.a.createElement(Ne,null))),r.a.createElement(se.a,{span:12},r.a.createElement(De,null)))}a(1056);var ke,Re,Me,Ae,_e,Fe,ze,Le,Te,Be=a(79),Ie=a(473),Ge=a(474),Pe=a(69),He=(a(1057),a(10)),We=new(ke=function(){function e(){Object(Ie.a)(this,e),Object(Be.a)(this,"topic",Re,this),Object(Be.a)(this,"weiboContent",Me,this),Object(Be.a)(this,"originData",Ae,this),Object(Be.a)(this,"originAllData",_e,this),this.days=(v()("2020-4-1").valueOf()-v()("2020-1-9").valueOf())/864e5,Object(Be.a)(this,"initData",Fe,this),Object(Be.a)(this,"updateContent",ze,this),Object(Be.a)(this,"currentDate",Le,this),Object(Be.a)(this,"updateDate",Te,this)}return Object(Ge.a)(e,[{key:"currentDateFormat",get:function(){return this.currentDate.format("YYYY-M-D")}}]),e}(),Re=Object(Pe.a)(ke.prototype,"topic",[He.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Me=Object(Pe.a)(ke.prototype,"weiboContent",[He.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ae=Object(Pe.a)(ke.prototype,"originData",[He.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_e=Object(Pe.a)(ke.prototype,"originAllData",[He.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fe=Object(Pe.a)(ke.prototype,"initData",[He.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){for(var t=[],a=0;a<e.days;a++)!function(a){var n=v()("2020/1/9").add(a,"days").format("YYYY-M-D");t.push(B("weibo_processed_json/".concat(n,".csv")).then((function(t){e.originData[n]=t})))}(a);Promise.all(t).then((function(){e.originAllData=U.a.chain(e.originData).values().flattenDeep().value()}))}}}),ze=Object(Pe.a)(ke.prototype,"updateContent",[He.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.topic=t,e.weiboContent=U.a.chain(e.originData[e.currentDateFormat]).filter((function(e){return e.topic.includes(t)})).orderBy((function(e){return e.thubs+e.forward+e.comment}),"desc").slice(0,5).value()}}}),Le=Object(Pe.a)(ke.prototype,"currentDate",[He.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v()("2020/1/9")}}),Object(Pe.a)(ke.prototype,"currentDateFormat",[He.g],Object.getOwnPropertyDescriptor(ke.prototype,"currentDateFormat"),ke.prototype),Te=Object(Pe.a)(ke.prototype,"updateDate",[He.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentDate=t,e.weiboContent=[]}}}),ke),Ue={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],visualMap:{show:!0,type:"continuous",max:1.0915669808461772,min:0,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"],colorAlpha:.95},seriesIndex:0,calculable:!0,orient:"vertical",showLabel:!0,itemWidth:20,itemHeight:140},legend:[{data:[""],selected:{},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},textStyle:{fontSize:14},borderWidth:0},xAxis3D:{nameGap:20,type:"value",axisLabel:{margin:8}},yAxis3D:{nameGap:20,type:"value",axisLabel:{margin:8}},zAxis3D:{name:"Heat(log10)",nameGap:20,type:"value",axisLabel:{margin:8},nameTextStyle:{color:"white"}},grid3D:{boxWidth:400,boxHeight:100,boxDepth:400,viewControl:{autoRotate:!1,autoRotateSpeed:10,rotateSensitivity:1,distance:500}},title:[{text:"\u793e\u4ea4\u7f51\u7edc\u4e2d\u5fc3\u7ed3\u6784\u53ef\u89c6\u5316-2020-1-9"}]};function Ve(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null);return Object(n.useEffect)((function(){function a(t){B("weibo_topic_json/".concat(t,".json")).then((function(t){var a=t.min,n=t.max;e.current.setOption(Object(Y.a)(Object(Y.a)({},Ue),{},{visualMap:Object(Y.a)(Object(Y.a)({},Ue.visualMap),{},{min:a,max:n}),series:t.series}),!0)}))}var n=Object(He.o)((function(){return We.currentDateFormat}),(function(e){a(e)}));return e.current=H.a.init(t.current,"light"),e.current.setOption(Ue),e.current.on("click",(function(e){var t=e.name;"line3D"!==!e.componentSubType&&We.updateContent(t)})),a(We.currentDate.format("YYYY-M-D")),n}),[]),r.a.createElement(R,{title:"\u8206\u60c5\u5206\u5e03"},r.a.createElement("div",{className:"chart-container",ref:t}))}var Ke=a(226),Je=a(1072),qe=a(1078),Ze=a(1073),Qe=a(1077),$e=a(136),Xe=a(1079),et=a(1080),tt=a(1081),at=a(1082),nt=function(e){var t=e.icon,a=e.text;return r.a.createElement(Je.a,null,r.a.createElement(t),a)},rt=Object(Ke.a)((function(){var e=We.weiboContent,t=We.updateDate,a=We.currentDate;return r.a.createElement(R,{title:"\u5fae\u535a\u8be6\u60c5",extra:r.a.createElement("div",{className:"content-form"},r.a.createElement(de.a,{width:"200px",onChange:t,value:a,disabledDate:function(e){return e<v()("2020/1/9")||e>v()("2020/3/31")},showToday:!1,allowClear:!1}))},r.a.createElement("div",{className:"content"},e.length?r.a.createElement(qe.b,{itemLayout:"vertical",size:"large",dataSource:e,renderItem:function(e){return r.a.createElement(qe.b.Item,{key:"".concat(e["\ufeffweiboname"],"-").concat(e.topic,"-").concat(e.date,"-").concat(e.time),actions:[r.a.createElement(nt,{icon:Xe.a,text:e.forward,key:"list-vertical-star-o"}),r.a.createElement(nt,{icon:et.a,text:e.thumbs,key:"list-vertical-like-o"}),r.a.createElement(nt,{icon:tt.a,text:e.comment,key:"list-vertical-message"})]},r.a.createElement(qe.b.Item.Meta,{avatar:r.a.createElement(Ze.a,{icon:r.a.createElement(at.a,null)}),title:e["\ufeffweiboname"],description:e.topic}),r.a.createElement(Qe.a,{bordered:!1,expandIconPosition:"right"},r.a.createElement(Qe.a.Panel,{header:"".concat(e.weibotext.slice(0,15)," ...")},e.weibotext)))}}):r.a.createElement($e.a,{description:"\u8bf7\u9009\u62e9\u8bdd\u9898"})))})),ct=a(475),it=a.n(ct),ot=(a(1058),{series:{name:"\u70ed\u70b9\u5206\u6790",type:"wordCloud",sizeRange:[6,66],rotationRange:[-45,90],textPadding:0,autoSize:{enable:!0,minSize:6},textStyle:{normal:{color:function(){return"rgb("+[Math.round(160*Math.random()),Math.round(160*Math.random()),Math.round(160*Math.random())].join(",")+")"}},emphasis:{shadowBlur:10,shadowColor:"#333"}}}});function lt(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null);return Object(n.useEffect)((function(){function a(e){B("weibo_wordcloud_json/".concat(e,".json")).then((function(e){t.current.setOption(Object(Y.a)(Object(Y.a)({},ot),{},{series:Object(Y.a)(Object(Y.a)({},ot.series),{},{data:e.data})}),!0)}))}var n=Object(He.o)((function(){return We.currentDateFormat}),(function(e){a(e)}));return t.current=H.a.init(e.current),a(We.currentDateFormat),n}),[]),r.a.createElement(R,{title:"\u5fae\u535a\u8bcd\u4e91"},r.a.createElement("div",{className:"chart-container",ref:e}))}var ut=Object(Ke.a)((function(){return Object(n.useEffect)((function(){We.initData()}),[]),r.a.createElement("div",{className:it.a.network},r.a.createElement("div",{className:"network-info"},r.a.createElement("div",{className:"network-info-container"},r.a.createElement("div",{className:"network-info-weibo"},r.a.createElement(rt,null)),r.a.createElement("div",{className:"wordCloud"},r.a.createElement(lt,null)))),r.a.createElement("div",{className:"network-chart"},r.a.createElement(Ve,null)))}));function st(){return r.a.createElement(ue.a,{gutter:16},r.a.createElement(se.a,{span:12}),r.a.createElement(se.a,{span:12}))}function mt(){return r.a.createElement(o.c,{history:u},r.a.createElement(S,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/analysis",component:Ce}),r.a.createElement(o.b,{path:"/network",component:ut}),r.a.createElement(o.b,{path:"/option",component:le}),r.a.createElement(o.b,{path:"/optionAnly",component:st}),r.a.createElement(o.a,{from:"/",to:"/analysis"}))))}a(1063),a(1064);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},222:function(e,t,a){e.exports={map:"_2krRyKeU__map","province-modal":"WxSGKjOb__province-modal"}},297:function(e,t,a){e.exports={migrate:"_3KdZYUPD__migrate","switch-btn":"_3YkeFVBQ__switch-btn",title:"_3ppD3pbt__title",select:"_1kTrIT7n__select"}},447:function(e,t,a){e.exports={layout:"zutNHzH-__layout"}},448:function(e,t,a){e.exports={clock:"_14gcb43x__clock"}},451:function(e,t,a){e.exports={section:"_3AG2OGZV__section"}},466:function(e,t,a){e.exports={opinion:"_1ISVMSF8__opinion"}},472:function(e,t,a){e.exports={analysis:"_2JSBJ6jk__analysis"}},475:function(e,t,a){e.exports={network:"_3AH0ckzl__network"}},542:function(e,t,a){e.exports=a(1065)}},[[542,1,2]]]);
//# sourceMappingURL=main.b1d8a895.chunk.js.map